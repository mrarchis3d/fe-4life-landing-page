---
import Card from '@/components/Card.astro';
import Panel from '@/components/Panel.astro';
import Promotion from '@/components/Promotion.astro';
import Layout from '@/layouts/Layout.astro';
import {
  getProducts,
  featuresPanelProTF,
  PanelProTFText,
} from '../data/products';
---

<Layout title="productos">
  <div id="showProm">
    <div>
      <div class="embed-container">
        <iframe
          id="iframe"
          src="https://player.vimeo.com/video/891604946?h=2aac511a0e&autoplay=1&loop=1&background=1"
          allow="autoplay; encrypted-media"
          data-ready="true"></iframe>
      </div>
      <div
        class="items-center bg-gradient-to-r from-violet-500 to-fuchsia-500 mt-4 lg:flex"
      >
        <div class="p-4 text-white rounded-lg md:text-lg text-xs m-6 text-left">
          <h1>
            Rio Vida<sup>®</sup> es la mejor bebida con antioxidantes <strong
              >del mercado</strong
            >
            <br /> No. 1 en Colombia.
          </h1>
          <div
            class="bg-blue-600/50 shadow-lg w-max rounded-full xs:p-4 p-3 xs:m-4 m-1"
          >
            <a
              data-navlink="home banner | video-banner"
              class="cta fake-btn font-bold"
              href="#"
              aria-hidden="false">Compra ya</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
  <Panel
    rightLeft={true}
    title="Pro-TF"
    description={PanelProTFText}
    image="protf_splash.png"
    features={featuresPanelProTF}
  />
  <div class="mx-auto max-w-7xl py-12 lg:py-24">
    <ul role="list" class="grid gap-4 md:grid-cols-3 grid-cols-1">
      {
        getProducts().map((product) => (
          <Card
            href={product.url}
            image={product.image}
            title={product.title}
            body={product.description}
            price={product.price}
            prevPrice={product.prevPrice}
          />
        ))
      }
    </ul>
  </div>

  <Promotion
    image="loyalty-program.jpg"
    title=""
    description="COMIENZA A RECIBIR PRODUCTOS ¡HOY MISMO!"
    features={[
      'Únete al Programa de Lealtad de 4Life® y empieza a recibir tus productos favoritos cada mes, al solicitar tu orden de Lealtad.',
      'Hasta un 15% en Puntos Redimibles para canjear por tus productos favoritos. Puedes obtener un máximo de 75 puntos al mes!',
      'Canjea tus Puntos por productos 4Life de tu elección.',
      'Recibirás un Producto de Lealtad del Mes, si mantienes tu orden mensual de 125 LP o más con el ¡Programa de Lealtad!',
    ]}
  />
</Layout>

<style>
  .embed-container {
    --video--width: 800;
    --video--height: 600;

    position: relative;
    padding-bottom: calc(
      var(--video--height) / var(--video--width) * 60%
    ); /* 41.66666667% */
    overflow-x: unset;
    max-width: 100%;
    margin-bottom: 3rem;
  }

  .embed-container iframe,
  .embed-container object,
  .embed-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    margin-top: 4rem;
  }
</style>
<script>
  const iframe = document.getElementById('iframe');
  const showProm = document.getElementById('showProm');
  const handleLoad = () => {
    showProm!.className =
      'bg-gradient-to-b from-blue-800 via-purple-100 to-purple-600';
  };
  if (showProm) {
    showProm!.className = 'hidden';
  }
  if (iframe && showProm) {
    iframe!.addEventListener('load', handleLoad, true);
  }
</script>
